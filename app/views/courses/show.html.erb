<%= render partial: 'application/errors', locals: {object: @course} %>

<div class="wrapper">

    <div class="contents">
         <h3 ><%= @course.name %> - Level <%= @course.level %> </h3>
        <p><%= @course.description %></p>
        <ul>
            <li><%= @course.day %>s <%= @course.time.try(:strftime, "at %I:%M %P") || "Time hasnt been set up" %></li>
            <li><%= @course.duration %> minutes </li>
            <li><%= number_to_currency(@course.price) %> </li>
        </ul>
        <h3>Teacher: <%= link_to @course.teacher.full_name, user_path(@course.teacher.id) %></h3>
    </div>
</div>

<% if !@course.reviews.empty? %>
    <div class="wrapper">
        <h3 class="contents">Reviews:</h3>
            <% @course.reviews.each do |review| %>
                <%= review.student.full_name %> <br>
                <%= review.rating %> <br>
                <%= review.content %> <br>
                <% if logged_in? && review.student = current_user %>
                <%= link_to 'Edit my review', edit_review_path(review), id: review.id %>
                <% end %>
            <% end %>
    </div>
<% end %>


    <% if logged_in? && current_user.student? %>
        <div class="button"><%= link_to 'Leave a Review', new_course_review_path(@course.id) %></div> 
    <% end %>


    <% if logged_in? && current_user.admin? %>
        <div class="button"><%= link_to 'Edit', edit_course_path %></div>
    <% end %>

